# 下载
```
http://archive.cloudera.com/kafka/kafka/4/
http://archive.cloudera.com/kafka/kafka/4/kafka-2.2.1-kafka4.1.0.tar.gz
```

# 部署
```
[hadoop@hadoop01 ~]$ cd ~/software/
[hadoop@hadoop01 software]$ tar -zxvf kafka-2.2.1-kafka4.1.0.tar.gz -C ~/app
[hadoop@hadoop01 software]$ cd ~/app/
[hadoop@hadoop01 app]$ ln -s kafka_2.11-2.2.1-kafka-4.1.0 kafka
[hadoop@hadoop01 app]$ cd ~/app/kafka/config/
[hadoop@hadoop01 config]$ vim server.properties
port=9092
zookeeper.connect=hadoop01:2181/kafka
log.dirs=/home/hadoop/tmp/kafka-logs

[hadoop@hadoop01 config]$ echo -e '# KAFKA ENV\nexport KAFKA_HOME=/home/hadoop/app/kafka\nexport PATH=$KAFKA_HOME/bin:$PATH' >> ~/.bashrc
[hadoop@hadoop01 config]$ source ~/.bashrc 

```

# 启动
```
[hadoop@hadoop01 ~]$ kafka-server-start.sh -daemon $KAFKA_HOME/config/server.properties 
```

# kafka-topics.sh脚本使用
```
[hadoop@hadoop01 ~]$ kafka-topics.sh --create \
> --zookeeper hadoop01:2181/kafka \
> --partitions 3 \
> --replication-factor 1 \
> --topic ruozedata
Created topic ruozedata.

# 可以查看kafka的data 目录
[hadoop@hadoop01 ~]$ cd ~/tmp/kafka-logs/
[hadoop@hadoop01 kafka-logs]$ ll
总用量 28
-rw-rw-r--. 1 hadoop hadoop    0 9月  23 12:56 cleaner-offset-checkpoint
-rw-rw-r--. 1 hadoop hadoop    4 9月  23 13:00 log-start-offset-checkpoint
-rw-rw-r--. 1 hadoop hadoop   54 9月  23 12:56 meta.properties
-rw-rw-r--. 1 hadoop hadoop   46 9月  23 13:00 recovery-point-offset-checkpoint
-rw-rw-r--. 1 hadoop hadoop   46 9月  23 13:00 replication-offset-checkpoint
drwxrwxr-x. 2 hadoop hadoop 4096 9月  23 12:59 ruozedata-0
drwxrwxr-x. 2 hadoop hadoop 4096 9月  23 12:59 ruozedata-1
drwxrwxr-x. 2 hadoop hadoop 4096 9月  23 12:59 ruozedata-2

# 查看有哪些topic
[hadoop@hadoop01 kafka-logs]$ kafka-topics.sh --list \
> --zookeeper hadoop01:2181/kafka
ruozedata

# 查看topic的描述
[hadoop@hadoop01 kafka-logs]$ kafka-topics.sh --describe \
> --zookeeper hadoop01:2181/kafka \
> --topic ruozedata
Topic:ruozedata PartitionCount:3        ReplicationFactor:1     Configs:
        Topic: ruozedata        Partition: 0    Leader: 0       Replicas: 0     Isr: 0
        Topic: ruozedata        Partition: 1    Leader: 0       Replicas: 0     Isr: 0
        Topic: ruozedata        Partition: 2    Leader: 0       Replicas: 0     Isr: 0
[hadoop@hadoop01 kafka-logs]$ 
```